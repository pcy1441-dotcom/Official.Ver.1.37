<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PINEAPPLE MYSTERY - COMPLETE SAGA</title>
<style>
  :root { 
    --bg: #050505; --accent: #f4d03f; --red: #cc0000; --blue: #2b57ff; --green: #28a745; 
    --kiwi: #00ff00; --bberry: #4facfe; --pink: #ff69b4; --gold: #b8860b;
  }
  body { font-family: 'Courier New', monospace; background: var(--bg); color: #e0e0e0; margin: 0; overflow-x: hidden; text-align: center; transition: 0.8s; }
  
  /* í…Œë§ˆ ëª¨ë“œ */
  body.kiwi-mode { --accent: var(--kiwi); color: var(--kiwi); }
  body.blueberry-mode { --accent: var(--bberry); color: #fff; }
  body.eden-active { background: #fff !important; color: #000 !important; }
  body.equinox-mode { background: #111 !important; color: #fff !important; }

  /* EQUINOX ê·¸ë¼ë°ì´ì…˜ í…ìŠ¤íŠ¸ */
  .equinox-text {
    font-size: 50px; font-weight: 900;
    background: linear-gradient(135deg, #ffffff 50%, #000000 50%);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    display: inline-block;
  }

  .ticker-wrap { width: 100%; overflow: hidden; background: var(--accent); color: #000; padding: 5px 0; font-weight: 900; position: fixed; z-index: 10; top: 0; }
  .t-bottom { top: auto; bottom: 0; }
  .ticker { display: inline-block; white-space: nowrap; animation: ticker 30s linear infinite; }
  @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

  #h-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 100; flex-direction: column; justify-content: center; align-items: center; }
  .p-cont { width: 200px; height: 3px; background: #222; margin-top: 15px; }
  .p-bar { width: 0%; height: 100%; background: #fff; transition: 0.1s; }

  .wrapper { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; }
  .card { background: rgba(10,10,10,0.98); padding: 35px; border-radius: 20px; border: 1px solid #222; width: 100%; max-width: 380px; position: relative; }
  
  .btn { background: #111; color: #fff; border: 1px solid #333; padding: 15px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 10px; font-weight: bold; }

  #role { font-size: 45px; font-weight: 900; margin-bottom: 10px; }
  #skill { font-size: 30px; font-weight: bold; margin-bottom: 10px; }
  .sk-gun { background: linear-gradient(45deg, #ff0000, #0000ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .sk-pink { color: var(--pink); } .sk-gold { color: var(--gold); }
  .sk-eden { color: #ff0000; text-shadow: 0 0 15px rgba(255,0,0,0.8); }
  .sk-bberry-devil { color: var(--bberry); font-style: italic; text-shadow: 0 0 8px var(--bberry); }

  #log-box { 
    display: none; text-align: left; background: #000 !important; 
    padding: 15px; font-size: 13px; color: var(--kiwi) !important; 
    margin-top: 15px; border: 1px solid var(--kiwi); line-height: 1.6;
    box-shadow: 0 0 15px rgba(0, 255, 0, 0.2);
  }

  .binary-list { font-size: 10px; color: #666; text-align: left; margin-top: 20px; line-height: 1.8; }
  #debug-btn { font-size: 10px; color: #1a1a1a; margin-top: 25px; cursor: pointer; }
</style>
</head>
<body>

<div class="ticker-wrap"><div class="ticker" id="tick-t">PINEAPPLE SYSTEM ONLINE ğŸ CORE SECURED ğŸ</div></div>

<div id="h-screen">
  <div style="color:#fff; letter-spacing: 3px; font-weight:bold;" id="h-msg">INITIALIZING...</div>
  <div class="p-cont"><div class="p-bar" id="p-bar"></div></div>
</div>

<div class="wrapper">
  <div id="equinox-screen" class="card" style="display:none;">
    <div class="equinox-text">EQUINOX</div>
    <p style="font-size:14px; color:#888;">ì–‘ê³¼ ìŒ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ë¬´ì–¸ê°€</p>
    <div class="binary-list">
      EDEN: 01000101 01000100 01000101 01001110<br>
      ZOMBIE: 01011010 01001111 01001101 01000010 01001001 01000101<br>
      CHILLSEAR: 01000011 01001000 01001001 01001100 01001100<br>
      CRYING DEVIL: 01000011 01010010 01011001 01001001 01001110 01000111<br>
      PINEAPPLE: 01010000 01001001 01001110 01000101<br>
      BLUEBERRY: 01000010 01001100 01010101 01000101<br>
      KIWI: 01001011 01001001 01010111 01001001
    </div>
    <button onclick="location.reload()" class="btn">RETURN TO CORE</button>
  </div>

  <div id="menu" class="card">
    <h1 id="m-title" style="color:var(--accent); letter-spacing:5px;">PINEAPPLE</h1>
    <p id="m-desc" style="font-size:10px; color:#555; margin-bottom:20px;">DOMINANT SYSTEM</p>
    <div style="margin-bottom:20px;">
      PLAYER: <input type="number" id="pCount" min="4" max="20" value="6" style="background:none; border:none; border-bottom:1px solid #444; color:#fff; width:45px; text-align:center; font-size:18px;">
    </div>
    <button onclick="bootSystem()" class="btn" id="start-btn" style="color:var(--accent);">START SYSTEM</button>
    <span id="debug-btn" onclick="openAdmin()">[ADMIN]</span>
    <div id="debug-panel" style="display:none; margin-top:20px; text-align:left; font-size:11px; border:1px dashed var(--accent); padding:10px;">
      TYPE: <select id="forceType" onchange="checkDevil(this.value)">
        <option value="none">RANDOM</option>
        <option value="Standard">Standard (59%)</option>
        <option value="Chillsear">Chillsear (30%)</option>
        <option value="Zombie">Zombie (10%)</option>
        <option value="Eden">Eden (1%)</option>
      </select>
      <div id="devil-info" style="color:var(--bberry); display:none; margin-top:5px; font-size:10px;">* CRYING DEVIL í™œì„±í™” ì‹œ ëª¨ë“  ìƒì¡´ìëŠ” ë³´ì•ˆê´€ì´ ë©ë‹ˆë‹¤.</div>
    </div>
  </div>

  <div id="draw-area" class="card" style="display:none;">
    <div id="pNum" style="color:#666; font-size:20px; margin-bottom:25px;"></div>
    <button onclick="reveal()" class="btn" style="background:var(--red); border:none; height:60px;">ACCESS ROLE</button>
  </div>

  <div id="result" class="card">
    <div id="role"></div>
    <div id="skill"></div>
    <div id="desc" style="font-size:16px; margin-bottom:25px; color:#444;"></div>
    <button onclick="next()" class="btn" style="background:#000; color:#fff;">CONFIRM</button>
  </div>

  <div id="final-screen" class="card" style="display:none;">
    <div id="fType" style="font-size:45px; font-weight:900; margin-bottom:10px;"></div>
    <div id="fDesc" style="font-size:15px; color:#888; margin-bottom:30px;"></div>
    <button onclick="checkLog()" class="btn" style="font-size:12px;">VIEW DATA LOG (0217)</button>
    <div id="log-box"></div>
    <button onclick="location.reload()" class="btn" style="background:none; border-color:#222; color:#444; margin-top:20px;">REBOOT</button>
  </div>
</div>

<div class="ticker-wrap t-bottom"><div class="ticker" id="tick-b">ğŸ PINEAPPLE CORP ğŸ CLASSIFIED ğŸ 0217 ğŸ</div></div>

<script>
const skills = {
  ë¨¸ë”: [
    {n:"ë°©íƒ„", d:"í•œ ë²ˆ ê³µê²©ì„ ë²„íŒë‹ˆë‹¤. (2ëª©ìˆ¨)ì…ë‹ˆë‹¤."}, 
    {n:"ê°€ë°©", d:"ì£½ì¸ ëŒ€ìƒì´ ì‚´ì•„ìˆëŠ” ê²ƒì²˜ëŸ¼ í–‰ë™í•˜ë‹¤ê°€ ë§ˆì§€ë§‰ì— ì‚¬ë§í•©ë‹ˆë‹¤. (1ëª…)ì…ë‹ˆë‹¤."}, 
    {n:"ì´ì¡ì´", d:"ë³´ì•ˆê´€ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì²˜ì¹˜í•©ë‹ˆë‹¤.", s:"sk-gun"}
  ],
  ë³´ì•ˆê´€: [
    {n:"ê°•ì¸í•œ", d:"ëª©ìˆ¨ì´ 2ê°œê°€ ë©ë‹ˆë‹¤.ì…ë‹ˆë‹¤."}, 
    {n:"ë§ˆí”¼ì•„", d:"ë¨¸ë”ì™€ ëª¨ë“  ì‹œë¯¼ì„ ì œê±°í•˜ë©´ ì¦‰ì‹œ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.", s:"sk-gold"}
  ],
  ì˜ì‚¬: [
    {n:"ìê°€ì¹˜ìœ ", d:"ìì‹ ì„ ì¹˜ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (1íšŒ)ì…ë‹ˆë‹¤."}, 
    {n:"ì „ë¬¸ ì˜ì‚¬", d:"ìµœëŒ€ 2ëª…ê¹Œì§€ ì¹˜ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤."}
  ],
  ì‹œë¯¼: [
    {n:"ìŠ¤íŒŒì´", d:"ì‹œë¯¼/ë³´ì•ˆê´€ ì œê±° ì‹œ ëª©ìˆ¨ ì¦ê°€. ë¨¸ë” ì²˜ì¹˜ ì‹œ ìì‹ ë„ ì‚¬ë§í•˜ë©° ì‹œë¯¼ì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.", s:"sk-gold"}, 
    {n:"í¼ë¸”win", d:"ê°€ì¥ ë¨¼ì € ë¨¸ë”ì—ê²Œ ì£½ìœ¼ë©´ ì¦‰ì‹œ ì‹œë¯¼ ìŠ¹ë¦¬ì…ë‹ˆë‹¤.", s:"sk-pink"}, 
    {n:"íŒ¨ë§", d:"í•œ ë²ˆ ê³µê²©ì„ ë§‰ì•„ëƒ…ë‹ˆë‹¤.ì…ë‹ˆë‹¤."}
  ]
};

const mTypes = [
  {n:"Standard", w:59, d:"ì¶”ê°€ ëŠ¥ë ¥ì´ í¬í•¨ëœ ê¸°ë³¸ ë¼ìš´ë“œì…ë‹ˆë‹¤.", c:"var(--red)"},
  {n:"Chillsear", w:30, d:"ì˜ì‚¬ê°€ ì¹˜ë£Œí•  ìˆ˜ ì—†ëŠ” ì•”ì‚´ ë¼ìš´ë“œì…ë‹ˆë‹¤.", c:"#87CEEB"},
  {n:"Zombie", w:10, d:"ì£½ì€ ìê°€ ì¢€ë¹„ê°€ ë˜ì–´ ê°ì—¼ì‹œí‚¤ëŠ” ë¼ìš´ë“œì…ë‹ˆë‹¤.", c:"#32CD32"},
  {n:"Eden", w:1, d:"[SYSTEM ERROR] ê³µí—ˆì˜ ê°•ë¦¼. ë¨¸ë”ì˜ ëª©ìˆ¨ì´ 5ê°œê°€ ë©ë‹ˆë‹¤.", c:"#000000"},
  {n:"Crying Devil", w:0, d:"ê³ í†µë°›ëŠ” ë¨¸ë”ë¥¼ ë³´ê³  ì§€ì–´ì§„ ì´ë¦„ì…ë‹ˆë‹¤. ìŠ¬í””ì˜ ì—°ì‡„ë¥¼ ëŠìœ¼ì‹­ì‹œì˜¤.", c:"#4facfe"}
];

let mode = "normal", tP, cur, rls, rMT, aS, log = [];

function openAdmin() {
  const pw = prompt("ENTER CODE:");
  if(pw === "619") {
    document.getElementById("menu").style.display = "none";
    document.getElementById("equinox-screen").style.display = "block";
    document.body.className = "equinox-mode";
  } else if(pw === "9245") {
    mode = "kiwi"; document.body.className = "kiwi-mode";
    document.getElementById("debug-panel").style.display = "block";
    setUI("KIWI_HACK", "THE UNKNOWN INVADER");
  } else if(pw === "1441") {
    mode = "blueberry"; document.body.className = "blueberry-mode";
    document.getElementById("debug-panel").style.display = "block";
    document.getElementById("forceType").innerHTML += `<option value="Crying Devil">Crying Devil</option>`;
    setUI("BLUEBERRY", "THE FALLEN CREATOR");
  }
}

function setUI(t, d) {
  document.getElementById("m-title").innerText = t;
  document.getElementById("m-desc").innerText = d;
}

function checkDevil(val) {
  document.getElementById("devil-info").style.display = (val === "Crying Devil") ? "block" : "none";
}

function bootSystem() {
  document.getElementById("h-screen").style.display = "flex";
  let p = 0;
  const iv = setInterval(() => {
    p += 5; document.getElementById("p-bar").style.width = p + "%";
    if(p >= 100) { clearInterval(iv); setup(); }
  }, 40);
}

function setup() {
  document.getElementById("h-screen").style.display = "none";
  tP = parseInt(document.getElementById("pCount").value);
  const fT = document.getElementById("forceType").value;
  if(fT !== "none") rMT = mTypes.find(t => t.n === fT);
  else {
    const r = Math.random()*100; let c = 0;
    for(const t of mTypes) { c+=t.w; if(r<c){ rMT=t; break; } }
  }

  rls = new Array(tP).fill(null);
  // ë¨¸ë” ì„ ì •
  const mIdx = Math.floor(Math.random() * tP);
  rls[mIdx] = "ë¨¸ë”";

  // ìš°ëŠ” ì•…ë§ˆ ëª¨ë“œ: ë¨¸ë” ì œì™¸ ì „ì› ë³´ì•ˆê´€
  if(rMT.n === "Crying Devil") {
    for(let i=0; i<tP; i++) if(rls[i] !== "ë¨¸ë”") rls[i] = "ë³´ì•ˆê´€";
  } else {
    // ì¼ë°˜ ëª¨ë“œ ì§ì—… ë°°ì •
    let remaining = []; rls.forEach((v, i) => { if(!v) remaining.push(i); });
    remaining.sort(() => Math.random() - 0.5);
    rls[remaining[0]] = "ë³´ì•ˆê´€";
    rls[remaining[1]] = "ì˜ì‚¬";
    for(let i=2; i<remaining.length; i++) rls[remaining[i]] = "ì‹œë¯¼";
  }

  aS = rls.map((role, i) => {
    if(role === "ë¨¸ë”") {
      if(rMT.n === "Eden") return {n:"Eden Protocol", d:"ë‹¹ì‹ ì€ 5ê°œì˜ ëª©ìˆ¨ì„ ê°€ì§„ ë¶ˆì‚¬ì‹ ì…ë‹ˆë‹¤. ëª¨ë“  ì‹œë¯¼ì„ ë§ì‚´í•˜ì‹­ì‹œì˜¤.", s:"sk-eden"};
      if(rMT.n === "Crying Devil") return {n:"Crying Devil", d:"ë‹¹ì‹ ì€ ë¸”ë£¨ë² ë¦¬ì˜ ê³ í†µë°›ëŠ” íŒŒí¸ì…ë‹ˆë‹¤. ë‹¹ì‹ ì„ í–¥í•œ ëª¨ë“  ì´êµ¬ì— ë§ì„œì‹­ì‹œì˜¤.", s:"sk-bberry-devil"};
      return skills.ë¨¸ë”[Math.floor(Math.random()*3)];
    }
    // ì‹œë¯¼/ë³´ì•ˆê´€/ì˜ì‚¬ ëŠ¥ë ¥
    if(role === "ì‹œë¯¼") return Math.random() > 0.6 ? skills.ì‹œë¯¼[Math.floor(Math.random()*3)] : {n:"ë¬´ëŠ¥ë ¥", d:"ëŠ¥ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.ì…ë‹ˆë‹¤."};
    if(role === "ë³´ì•ˆê´€") return skills.ë³´ì•ˆê´€[Math.floor(Math.random()*2)];
    if(role === "ì˜ì‚¬") return skills.ì˜ì‚¬[Math.floor(Math.random()*2)];
  });

  log = rls.map((r,i) => `P${i+1}: [${r}] - ${aS[i].n}`);
  cur = 0;
  document.getElementById("menu").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `PLAYER 1`;
}

function reveal() {
  const r = rls[cur], s = aS[cur], rd = document.getElementById("role"), sd = document.getElementById("skill");
  rd.innerText = r; rd.style.color = r==="ë¨¸ë”"?"var(--red)":r==="ë³´ì•ˆê´€"?"var(--blue)":r==="ì˜ì‚¬"?"var(--green)":"#666";
  sd.innerText = s.n; sd.className = s.s || "";
  document.getElementById("desc").innerText = s.d;
  document.getElementById("draw-area").style.display = "none";
  document.getElementById("result").style.display = "block";
}

function next() {
  cur++;
  if(cur >= tP) {
    document.getElementById("result").style.display = "none";
    document.getElementById("final-screen").style.display = "block";
    document.getElementById("fType").innerText = rMT.n;
    document.getElementById("fType").style.color = rMT.c;
    document.getElementById("fDesc").innerText = rMT.d;
    if(rMT.n === "Eden") document.body.classList.add("eden-active");
    return;
  }
  document.getElementById("result").style.display = "none";
  document.getElementById("draw-area").style.display = "block";
  document.getElementById("pNum").innerText = `PLAYER ${cur+1}`;
}

function checkLog() {
  const pw = prompt("ENTER ACCESS CODE (0217):");
  if(pw === "0217") {
    document.getElementById("log-box").innerHTML = "<div style='color:#fff; border-bottom:1px solid #00ff00; margin-bottom:10px; font-size:10px;'>[KIWI_HACK_CONNECTED]... ACCESSING BLACKBOX</div>" + log.join("<br>");
    document.getElementById("log-box").style.display = "block";
  }
}
</script>
</body>
</html>
